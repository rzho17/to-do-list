(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(o){t(1,arguments);var n=Object.prototype.toString.call(o);return o instanceof Date||"object"===e(o)&&"[object Date]"===n?new Date(o.getTime()):"number"==typeof o||"[object Number]"===n?new Date(o):("string"!=typeof o&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function n(e){t(1,arguments);var n=o(e);return n.setHours(0,0,0,0),n}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}const r=()=>{const e=document.querySelector(".mainContent"),t=document.createElement("h2");t.className="taskTitle",t.textContent="Home",e.append(t)},a=()=>{const e=document.querySelector(".mainContent");m(),r(),e.append(P(M.arr))},s=(document.querySelector(".home").addEventListener("click",(()=>{a(),y()})),e=>{const t=document.querySelector(".dropDownItems");let o=0;return e.forEach((e=>{const n=document.createElement("li");n.className="projectLi",n.dataset.projectNum=o,o++,n.textContent=e.project,t.append(n)})),t}),l=()=>{document.querySelector(".dropDownItems").innerHTML=""},d=(e,t)=>{const o=document.querySelector(`#${t}`),n=document.createElement("option");return n.text=e,n.value=e,o.append(n),n},u=e=>{const t=document.querySelector(`#${e}`);for(;t.options.length>0;)t.remove(0)},i=()=>{l(),s(w.projectArr),C(),N()},m=()=>{document.querySelector(".mainContent").innerHTML=""},p=(e,t,o,n)=>{const c=document.createElement("div");c.setAttribute("class","taskContainer"),c.dataset.number=n;const r=document.createElement("div");r.className="checkAndTitle";const a=document.createElement("input");a.setAttribute("type","checkbox"),a.className="complete",a.dataset.number=n;const s=document.createElement("div");s.textContent=e,s.className="title";const l=document.createElement("div");l.textContent="Details",l.className="details",l.dataset.formTarget="#detailInfo";const d=document.createElement("div");d.textContent=o,d.className="date";const u=document.createElement("div");u.className="buttonBox";const i=document.createElement("img");i.className="editBtn",i.src="assets/edit.svg",i.alt="edit button",i.dataset.number=n,i.dataset.formTarget="#edit";const m=document.createElement("img");return m.src="assets/trash.svg",m.alt="trash button",m.className="remove",m.textContent="X",m.dataset.number=n,r.append(a,s),u.append(l,i,m),c.append(r,u),s.append(d),c},y=((()=>{const e=document.querySelector(".navBtn"),t=document.querySelector("#navContainer");e.addEventListener("click",(()=>{t.classList.toggle("nav"),t.style.width="100%"}))})(),(()=>{const e=document.querySelector(".closeNav"),t=document.querySelector("#navContainer");e.addEventListener("click",(()=>{t.classList.toggle("nav"),t.style.width="0"}))})(),()=>{document.querySelector(".closeNav");const e=document.querySelector("#navContainer");e.classList.toggle("nav"),e.style.width="0"}),g=e=>{const t=document.querySelector("#overlay");void 0!==e&&(e.classList.add("active"),t.classList.add("active"))},S=e=>{const t=document.querySelector("#overlay");void 0!==e&&(e.classList.remove("active"),t.classList.remove("active"))};document.querySelectorAll("[data-form-target]").forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(e.dataset.formTarget);g(t)}))})),document.querySelectorAll("[data-form-target]").forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(e.dataset.formTarget);console.log(t),g(t)}))}));const v=()=>{document.querySelectorAll("[data-form-target]").forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(e.dataset.formTarget);g(t)}))}))},f=(document.querySelectorAll("[data-form-close]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".modal");S(t)}))})),document.querySelector("#overlay").addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((e=>{S(e)}))})),e=>{const t=document.querySelectorAll(".details"),o=document.querySelector("#detailInfo");t.forEach((t=>{t.addEventListener("click",(n=>{const c=t.parentNode.parentNode.dataset.number,r=document.createElement("button");o.textContent="",r.textContent="X",r.className="close",r.type="button",r.dataset.formClose="",o.append(r),document.querySelectorAll("[data-form-close]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".modal");S(t)}))}));const a=Object.values(e[c]);Object.keys(e[c]).forEach((e=>{const t=document.createElement("div");t.className="newKey";const n=document.createElement("div");n.className="keyValue",n.textContent=e.charAt(0).toUpperCase()+e.substring(1)+":",t.append(n),o.append(t)})),document.querySelectorAll(".newKey").forEach(((e,t)=>{const o=document.createElement("div");o.className="itemValue",o.textContent=a[t],e.append(o)}))}))}))}),E=e=>{document.querySelector(".mainContent").append(e)},h=e=>{const t=JSON.stringify(e);localStorage.setItem("tasks",t)},q=e=>{const t=JSON.stringify(e);localStorage.setItem("project",t)};class b{constructor(e){this.project=e}}const C=()=>{const e=document.querySelectorAll(".projectLi");u("project"),u("editProject"),d("Home","project"),d("Home","editProject"),e.forEach((e=>{d(e.innerText,"project"),d(e.innerText,"editProject")}))},k=e=>(M.arr.forEach(((t,o)=>{t.project===e&&E(p(t.title,t.description,t.dueDate,o))})),O(M.arr),[]),L=()=>{const e=new Date;return M.arr.forEach(((n,r)=>{const a=n.dueDate.replaceAll("-","/"),s=new Date(a);e.setHours(0,0,0,0);const l=function(e,n){return t(2,arguments),function(e,n){t(2,arguments);var r=o(e),a=c(n);return isNaN(a)?new Date(NaN):a?(r.setDate(r.getDate()+a),r):r}(e,7*c(n))}(e,1);(function(e,n){t(2,arguments);var c=o(e).getTime(),r=o(n.start).getTime(),a=o(n.end).getTime();if(!(r<=a))throw new RangeError("Invalid interval");return c>=r&&c<=a})(s,{start:e,end:l})&&E(p(n.title,n.description,n.dueDate,r))})),O(M.arr),[]},N=()=>{const e=document.querySelector(".mainContent"),t=document.querySelectorAll(".projectLi"),o=document.createElement("h2");o.className="taskTitle",o.textContent="Home";const n=document.querySelector(".remove");t.forEach((t=>{t.addEventListener("click",(t=>{e.innerHTML="",o.textContent=t.target.textContent;const c=Number(t.target.dataset.projectNum);n.value=c,e.append(o),e.append(k(t.target.textContent)),e.childElementCount<=1&&D(c),y()}))}))},j=e=>{const t=document.querySelector(".mainContent"),o=document.createElement("h2");o.className="taskTitle",o.textContent="Home",t.innerHTML="",o.textContent=e,t.append(o),"Home"===e?a():t.append(k(e))};N();const D=e=>{const t=document.querySelector(".mainContent"),o=document.querySelector(".taskTitle");o.className="taskTitle";const n=document.createElement("button");return n.className="removeProject",o.textContent="All Done? Create a new task or delete this project",n.textContent="Remove Project",n.addEventListener("click",(t=>{n.dataset.num=e;const o=n.dataset.num;w.projectArr.splice(o,1),l(),q(w.projectArr),i(),m(),a()})),t.append(n),t},w=(()=>{const e=document.querySelector("#getProject"),t=document.querySelector(".mainContent");let o=[];return o=0===localStorage.length&&"undefined"!=typeof localStorage||null===localStorage.getItem("project")?[]:JSON.parse(localStorage.getItem("project")),e.addEventListener("submit",(n=>{n.preventDefault();const c=new FormData(e).get("newProject"),r=new b(c);""!==r.project&&(o.push(r),q(o),l()),s(o),C(),N(),t.childElementCount<=1&&D(),console.log(o),e.reset(),S(e)})),{projectArr:o}})();document.querySelector(".addProject").addEventListener("click",(e=>{e.stopPropagation()})),document.querySelector(".displayDropDown").addEventListener("click",(()=>{document.querySelector(".dropDownItems").classList.toggle("displayItems")})),document.querySelector(".today").addEventListener("click",(()=>{m();const e=document.querySelector(".mainContent"),o=document.createElement("h2");o.textContent="Today",o.classList="taskTitle",e.append(o),(()=>{const e=new Date;M.arr.forEach(((o,c)=>{const r=o.dueDate.replaceAll("-","/");(function(e,o){t(2,arguments);var c=n(e),r=n(o);return c.getTime()===r.getTime()})(new Date(r),e)&&E(p(o.title,o.description,o.dueDate,c))})),O(M.arr)})(),y()})),document.querySelector(".week").addEventListener("click",(()=>{m();const e=document.querySelector(".mainContent"),t=document.createElement("h2");t.textContent="This Week",t.classList="taskTitle",e.append(t),L(),y()}));class T{constructor(e,t,o,n,c,r){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.complete=c,this.project=r}}const x=e=>{document.querySelectorAll(".remove").forEach((t=>{t.addEventListener("click",(t=>{e.splice(t.target.dataset.number,1),m(),r(),P(e)}))}))},A=e=>{const t=document.querySelector("#edit"),o=document.querySelectorAll(".editBtn");v(),o.forEach((o=>{o.addEventListener("click",(o=>{let n=o.target.dataset.number;const c=e[n];v(),t.addEventListener("submit",(o=>{o.preventDefault();const r=new FormData(t),a=r.get("editTitle"),s=r.get("editDescription"),l=r.get("editDate"),d=r.get("editPriority"),u=c.complete,i=r.get("editProject"),p=new T(a,s,l,d,u,i);console.log(e),""!==n&&(e.splice(n,1,p),m(),(e=>{const t=document.querySelector(".mainContent"),o=document.createElement("h2");o.className="taskTitle",o.textContent=e,t.append(o)})(i),P(e),j(i)),n="",S(t)}))}))}))},I=e=>{document.querySelectorAll(".complete").forEach((t=>{t.addEventListener("click",(t=>{const o=t.target.dataset.number;console.log(o),console.log(e[o]),!1===e[o].complete?(e[o].complete=!0,(e=>{const t=e.target.parentElement.parentElement;console.log(t);const o=t.querySelector(".title");t.querySelector(".details"),t.querySelector(".date"),o.classList.toggle("toDoChecked")})(t),console.log(e[o].complete)):(e[o].complete=!1,(e=>{const t=e.target.parentElement,o=t.querySelector(".title");t.querySelector(".details"),t.querySelector(".date"),o.classList.remove("toDoChecked")})(t),console.log(e[o].complete)),h(e)}))}))},H=e=>{let t=0;e.forEach((e=>{!0===e.complete&&(e=>{console.log(e);const t=document.querySelector('.taskContainer[data-number="'+e+'"]');console.log(t);const o=document.querySelector('input[data-number="'+e+'"]');if(console.log(o),null===t||null===o)console.log("nothing");else{const e=t.querySelector(".title");t.querySelector(".details"),t.querySelector(".date"),o.checked=!0,e.classList.toggle("toDoChecked")}})(t),t++}))},P=e=>{let t=0;return e.forEach((e=>{const o=Object.values(e);E(p(o[0],o[1],o[2],t)),t++})),x(e),A(e),I(e),H(e),h(e),f(e),[]},O=e=>{x(e),A(e),I(e),H(e),f(e)},M=(()=>{const e=document.querySelector("#addTaskForm");let t=[];return t=0===localStorage.length?[]:JSON.parse(localStorage.getItem("tasks")),e.addEventListener("submit",(o=>{o.preventDefault();const n=new FormData(e),c=n.get("title"),a=n.get("description"),s=n.get("date"),l=n.get("priority"),d=n.get("project"),u=new T(c,a,s,l,!1,d);t.push(u),m(),r(),P(t),j(d),e.reset(),S(e)})),{arr:t}})();r(),a(),i(),v()})();